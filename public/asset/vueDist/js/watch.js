(function(t){function e(e){for(var i,r,A=e[0],s=e[1],u=e[2],h=0,d=[];h<A.length;h++)r=A[h],a[r]&&d.push(a[r][0]),a[r]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);c&&c(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,A=1;A<n.length;A++){var s=n[A];0!==a[s]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={watch:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var A=window["webpackJsonp"]=window["webpackJsonp"]||[],s=A.push.bind(A);A.push=e,A=A.slice();for(var u=0;u<A.length;u++)e(A[u]);var c=s;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("0ad2")},"0ad2":function(t,e,n){"use strict";n.r(e);var i,a,o=n("8852"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"common-style",attrs:{id:"watch"}},[n("Bookmark",{attrs:{videoId:t.videoId,isAuth:t.isAuth,isBookmark:t.isBookmark,csrf_name:t.csrf_name,csrf_value:t.csrf_value}}),n("YoutubeMovie",{attrs:{videoId:t.videoId}})],1)},A=[],s=(n("94d6"),n("8915"),n("8a38"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"r",staticClass:"youtube-sec"},[n("youtube",{ref:"youtube",staticStyle:{"z-index":"99"},attrs:{videoId:t.videoId,"player-vars":t.playerVars},on:{playing:t.playing}}),n("br"),n("div",{attrs:{id:"displayField"}},[n("div",{attrs:{id:"displayText"}},[t._v(t._s(t.displayText))]),n("div",{attrs:{id:"inputPhrase"}},[n("span",{attrs:{id:"inputtedPhrase"}},t._l(t.inputtedText,(function(e,i){return n("span",{key:i,staticClass:"inputtedText"},[t._v(t._s(e+" "))])})),0),n("span",{attrs:{id:"restPhrase"}},t._l(t.restText,(function(e,i){return n("span",{key:i,staticClass:"restText"},[t._v(t._s(e+" "))])})),0)]),n("div",{attrs:{id:"inputRoman"}},[n("span",[t._v(t._s(t.inputRoman))])])]),n("br"),n("span")],1)}),u=[],c=(n("46c2"),n("44ba"),n("1fe3"),n("8411")),h=n.n(c),d={name:"HiraganaToRoman",data:function(){return{roman:{"あ":["a"],"い":["i","yi"],"う":["u","wu"],"え":["e"],"お":["o"],"か":["ka"],"き":["ki"],"く":["ku"],"け":["ke"],"こ":["ko"],"さ":["sa"],"し":["si"],"す":["su"],"せ":["se"],"そ":["so"],"た":["ta"],"ち":["ti","chi"],"つ":["tu","tsu"],"て":["te"],"と":["to"],"な":["na"],"に":["ni"],"ぬ":["nu"],"ね":["ne"],"の":["no"],"は":["ha"],"ひ":["hi"],"ふ":["hu","fu"],"へ":["he"],"ほ":["ho"],"ま":["ma"],"み":["mi"],"む":["mu"],"め":["me"],"も":["mo"],"や":["ya"],"ゆ":["yu"],"いぇ":["ye"],"よ":["yo"],"ら":["ra"],"り":["ri"],"る":["ru"],"れ":["re"],"ろ":["ro"],"わ":["wa"],"ゐ":["wyi"],"ゑ":["wye"],"を":["wo"],"ん":["nn","n"],"が":["ga"],"ぎ":["gi"],"ぐ":["gu"],"げ":["ge"],"ご":["go"],"ざ":["za"],"じ":["zi","ji"],"ず":["zu"],"ぜ":["ze"],"ぞ":["zo"],"だ":["da"],"ぢ":["di"],"づ":["du"],"で":["de"],"ど":["do"],"ば":["ba"],"び":["bi"],"ぶ":["bu"],"べ":["be"],"ぼ":["bo"],"ぱ":["pa"],"ぴ":["pi"],"ぷ":["pu"],"ぺ":["pe"],"ぽ":["po"],"きゃ":["kya"],"きゅ":["kyu"],"きょ":["kyo"],"しゃ":["sya"],"しゅ":["syu"],"しょ":["syo"],"ちゃ":["tya","cha"],"ちぃ":["tyi"],"ちゅ":["tyu","chu"],"ちぇ":["tye","che"],"ちょ":["tyo","cho"],"にゃ":["nya"],"にぃ":["nyi"],"にゅ":["nyu"],"にぇ":["nye"],"にょ":["nyo"],"ひゃ":["hya"],"ひぃ":["hyi"],"ひゅ":["hyu"],"ひぇ":["hye"],"ひょ":["hyo"],"みゃ":["mya"],"みぃ":["myi"],"みゅ":["myu"],"みぇ":["mye"],"みょ":["myo"],"りゃ":["rya"],"りぃ":["ryi"],"りゅ":["ryu"],"りぇ":["rye"],"りょ":["ryo"],"ぎゃ":["gya"],"ぎぃ":["gyi"],"ぎゅ":["gyu"],"ぎぇ":["gye"],"ぎょ":["gyo"],"じゃ":["jya","ja","zya"],"じぃ":["jyi","zyi"],"じゅ":["jyu","ju","zyu"],"じぇ":["jye","je","zye"],"じょ":["jyo","jo","zyo"],"ぢゃ":["dya"],"ぢぃ":["dyi"],"ぢゅ":["dyu"],"ぢぇ":["dye"],"ぢょ":["dyo"],"びゃ":["bya"],"びぃ":["byi"],"びゅ":["byu"],"びぇ":["bye"],"びょ":["byo"],"ぴゃ":["pya"],"ぴぃ":["pyi"],"ぴゅ":["pyu"],"ぴぇ":["pye"],"ぴょ":["pyo"],"ふぁ":["fa"],"ふぃ":["fi"],"ふぇ":["fe"],"ふぉ":["fo"],"ふゃ":["fya"],"ふゅ":["fyu"],"ふょ":["fyo"],"ぁ":["xa","la"],"ぃ":["xi","li"],"ぅ":["xu","lu"],"ぇ":["xe","le"],"ぉ":["xo","lo"],"ゃ":["xya","lya"],"ゅ":["xyu","lyu"],"ょ":["xyo","lyo"],"っ":["xtu","ltu","xtsu"],"うぃ":["wi"],"うぇ":["we"],"ヴぁ":["va"],"ヴぃ":["vi"],"ヴ":["vu"],"ヴぇ":["ve"],"ヴぉ":["vo"],"ー":["-"]}}}},l=d,m=n("b0c5"),y=Object(m["a"])(l,i,a,!1,null,null,null),f=y.exports,p=16,g={name:"YoutubeMovie",props:{videoId:String},data:function(){return{playerVars:{controls:0,disablekb:1,fs:0,modestbranding:1,showinfo:0},allPhraseData:"",displayText:"",inputText:"",inputtedKanaNum:0,inputtedText:"",restText:[],inputRoman:"",matchedChunk:"",romanChunkCandidate:[],finishFlg:!1,textPart:0,timer:0,movieTime:0,nextPhraseNo:0}},computed:{player:function(){return this.$refs.youtube.player}},beforeMount:function(){window.addEventListener("keydown",this.onKeyDownEvent)},created:function(){var t=this,e="8083"===location.port?"8081":location.port,n=location.protocol+"//"+location.hostname+":"+e+"/typingGame/getTypeText?videoId="+this.videoId;fetch(n).then((function(t){return t.json()})).then((function(e){t.allPhraseData=e}))},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDownEvent)},methods:{playing:function(){document.activeElement.blur(),0===this.movieTime&&this.startingType()},startType:function(t){0===this.movieTime&&(this.player.playVideo(),this.startingType())},startingType:function(){var t=this,e=h()();e-this.timer>p&&(this.player.getCurrentTime().then((function(e){return t.movieTime=e})),this.allPhraseData.length>this.nextPhraseNo&&this.movieTime>this.allPhraseData[this.nextPhraseNo]["startTime"]&&(this.displayText=this.allPhraseData[this.nextPhraseNo]["text"],this.inputText=this.allPhraseData[this.nextPhraseNo]["Furigana"].split(" ").filter(Boolean),this.inputtedKanaNum=0,this.inputtedText=[],this.restText=this.inputText.concat(),this.inputRoman="",this.matchedChunk="",this.romanChunkCandidate=[],this.textPart=0,this.nextPhraseNo++),this.timer=e),requestAnimationFrame(this.startingType)},onKeyDownEvent:function(t){var e=this;this.finishFlg||(0===this.romanChunkCandidate.length&&(this.romanChunkCandidate=this.searchNextRomanChunkCandidate(this.restText[this.textPart])),this.romanChunkCandidate.forEach((function(n,i,a){if(-1!=n){var o=!1;n.forEach((function(n,a,r){!0!==o&&0===n.indexOf(e.matchedChunk+t.key)&&(e.inputRoman+=t.key,e.matchedChunk+=t.key,n.length===e.matchedChunk.length&&(e.matchedChunk="",e.romanChunkCandidate=[],e.restText[e.textPart]=e.restText[e.textPart].slice(i+1),e.inputtedKanaNum+=i+1,e.inputtedText.length<=e.textPart&&e.inputtedText.push(""),e.inputtedText[e.textPart]=e.inputText[e.textPart].slice(0,e.inputtedKanaNum),0===e.restText[e.textPart].length&&(e.inputRoman+=" ",e.textPart++,e.inputtedKanaNum=0),o=!0))}))}})))},searchNextRomanChunkCandidate:function(t){var e=t.slice(0,1),n=t.slice(1,2),i=t.slice(2,3),a=this.convertHiraganaToRoman(e),o=this.convertHiraganaToRoman(e+n),r=this.convertHiraganaToRoman(e+n+i);if(this.isHankakuEisuuzi(e))return[[e]];if(1===t.length)return[a];if(this.isOOmozi(e)){if("ん"===e&&"な"===n)return[["nn"]];if(this.isOOmozi(n))return[a];if(this.isKomozi(n))return[a,o]}else if(this.isKomozi(e)){if(t.length>=3&&this.isOOmozi(n)&&this.isKomozi(i))return[a,o,r];if(this.isOOmozi(n))return[a,o]}},isHankakuEisuuzi:function(t){return!!t.match(/^[a-z0-9]/)},isHiragana:function(t){return!!t.match(/^[\u3041-\u3096|\u30FC]/)},isKomozi:function(t){return this.isHiragana(t)&&t.match(/^[\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E]+$/)},isOOmozi:function(t){return this.isHiragana(t)&&!this.isKomozi(t)},convertHiraganaToRoman:function(t){var e=!1;"っ"===t.slice(0,1)&&(e=!0,t=1===t.length?t:t.slice(1));var n=f.data().roman;for(var i in n)if(i===t)return e&&"っ"!==t?n[i].map((function(t){return t.slice(0,1)+t})):n[i];return-1}}},B=g,v=(n("1563"),Object(m["a"])(B,s,u,!1,null,"0b79d4ad",null)),E=v.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isAuth?i("div",[t.isBookmark?i("div",[i("img",{attrs:{id:"bookmark",src:n("9862")},on:{click:t.changeBookmark}}),t._v("ブックマーク済み\n    ")]):i("div",[i("img",{attrs:{id:"unbookmark",src:n("f9dd")},on:{click:t.changeBookmark}}),t._v("ブックマークする\n    ")])]):i("div",[t._v("ログインするとブックマーク機能が使えます")])])},Q=[],x=n("a5e5"),C=n.n(x),w={name:"Bookmark",props:{videoId:String,isAuth:Boolean,csrf_name:String,csrf_value:String,isBookmark:Boolean},data:function(){return{port:String}},created:function(){this.port="8083"===location.port?"8081":location.port},methods:{changeBookmark:function(t){var e=this,n={videoId:this.videoId,isBookmark:this.isBookmark,csrf_name:this.csrf_name,csrf_value:this.csrf_value},i="POST",a=C()(n),o={"Content-type":"application/json"},r=location.protocol+"//"+location.hostname+":"+this.port+"/bookmark/changeBookmark";fetch(r,{method:i,headers:o,body:a}).then((function(t){return t.json()})).then((function(t){!0===t.noError&&(e.isBookmark=t.isBookmark)}))}}},b=w,T=(n("71f9"),Object(m["a"])(b,k,Q,!1,null,"3ec728f0",null)),D=T.exports,I=n("2de7"),P=n.n(I);o["a"].use(P.a);var R={name:"watch",components:{YoutubeMovie:E,Bookmark:D},data:function(){return{videoId:document.getElementsByName("videoId")[0].value,isAuth:Boolean(document.getElementsByName("isAuth")[0].value),isBookmark:Boolean(document.getElementsByName("isBookmark")[0].value),csrf_name:document.getElementsByName("csrf_name")[0].value,csrf_value:document.getElementsByName("csrf_value")[0].value}}},_=R,j=(n("56bd"),Object(m["a"])(_,r,A,!1,null,null,null)),O=j.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(O)}}).$mount("#watch")},1563:function(t,e,n){"use strict";var i=n("c22a"),a=n.n(i);a.a},"56bd":function(t,e,n){"use strict";var i=n("9280"),a=n.n(i);a.a},"71f9":function(t,e,n){"use strict";var i=n("a1ca"),a=n.n(i);a.a},9280:function(t,e,n){},9862:function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAQABADASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEI/8QAIRAAAgEEAgIDAAAAAAAAAAAAAQIFAwQREgAGMUETIXH/xAAVAQEBAAAAAAAAAAAAAAAAAAAHCP/EACQRAAECBAUFAAAAAAAAAAAAABESIQAUFTEDBRMkMkJygaHR/9oADAMBAAIRAxEAPwDdczMdg7tN1LOONy9t8mlKjS20WntgO4H7kk+M8Q0z2DpM3StJE3KWvyaVaNXbRqe2C6A/mQR5xyy0PN9G7A8lYWrNQRna3r6FkCsCADj6yM+D7GfscRUPN957AkjfWrLQdka4r6FUKqACBn2ceB7OcAcisZzVycesa9nQg37Cw4IchoS9tL9Msnyfvsx//9k="},a1ca:function(t,e,n){},c22a:function(t,e,n){},f9dd:function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAQABADASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDB//EACMQAAEDBAICAwEAAAAAAAAAAAIBAwQFBgcRCCESEwAxMhT/xAAVAQEBAAAAAAAAAAAAAAAAAAADBP/EABoRAAEFAQAAAAAAAAAAAAAAAAAREiEiYWL/2gAMAwEAAhEDEQA/ANJyBf8AlLkXkaXQbTcq0ijrK9EOnw0cWOzG9iAMh9A60vkhEZ9D5a2iIifFj+/8pcdcjQ6DdZ1aPR0k+iZT5iOpHejexQJ9gT60nipCYdF462qKqfKXvYWR+NuUpN221Rnnacw5IcpVR/nN6MDTwGIo4o9I4CH+T6UhRdKP2WTYWR+SWUo123LRXmadIcjuVWopHNmMbTIAJI2pdK4aB+Q6QiVdIP1BZ3Q0Jh//2Q=="}});
//# sourceMappingURL=watch.js.map